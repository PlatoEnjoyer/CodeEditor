cmake_minimum_required(VERSION 3.16)
project(CodeEditor)

set(CMAKE_CXX_STANDARD 17)

find_package(Qt5 REQUIRED COMPONENTS Widgets)

add_executable(code_editor
    src/main.cpp
    src/ui/stylemanager.cpp
)

# Путь к папке с исходными стилями
set(STYLES_SRC "${CMAKE_SOURCE_DIR}/src/ui/styles")
set(STYLES_DST "${CMAKE_BINARY_DIR}/ui/styles")

# Находим все файлы в папке styles
file(GLOB_RECURSE STYLES_FILES RELATIVE "${STYLES_SRC}" "${STYLES_SRC}/*")

# Создаём список полных путей к файлам-источникам
set(STYLES_SOURCES)
foreach(FILE ${STYLES_FILES})
    list(APPEND STYLES_SOURCES "${STYLES_SRC}/${FILE}")
endforeach()

# Цель: копировать стили только при изменении
add_custom_target(CopyStyles ALL
    COMMAND ${CMAKE_COMMAND} -E copy_directory
            "${STYLES_SRC}" "${STYLES_DST}"
    DEPENDS ${STYLES_SOURCES}
    COMMENT "Copying styles if changed..."
    VERBATIM
)

target_link_libraries(code_editor PRIVATE Qt5::Widgets)
